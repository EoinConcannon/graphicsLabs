<!DOCTYPE html>

<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<html>

<head>
    <meta charset="UTF-8">
    <title>Canvas</title>

    <style type="text/css">
        body {
            background-color: white;
        }

        canvas {
            border: solid black;
        }
    </style>

</head>

<body>

    <h1>Eoin Concannon</h1>

    <canvas id="canvas-for-ball" width="1400" height="700"></canvas>

    <h1 hidden>HIT</h1>

    <script type="text/javascript">
        // Gets a handle to the element with id canvasOne.
        var canvas = document.getElementById("canvas-for-ball");
        // Get a 2D context for the canvas.
        var ctx = canvas.getContext("2d");

        //ball object
        class Ball {
            constructor(x, y, xSpeed, ySpeed, radian, colour) {
                this.x = x;
                this.y = y;
                this.ySpeed = ySpeed;
                this.xSpeed = xSpeed;
                this.radian = radian;
                this.colour = colour;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radian, 0, 2 * Math.PI);
                ctx.fillStyle = this.colour;
                ctx.fill();
                ctx.stroke();
            }
            move() {
                //Update the y and x location.
                this.y += this.ySpeed;
                this.x += this.xSpeed;

                if (this.y >= 700) {
                    //when ball reaches bottom of canvas
                    this.ySpeed = -1 * this.ySpeed;
                }
                else if (this.y <= 0) {
                    //when ball reaches top of canvas
                    this.ySpeed = -1 * this.ySpeed;
                }
                if (this.x >= 1400) {
                    //when ball reaches right of canvas
                    this.xSpeed = -1 * this.xSpeed;
                }
                else if (this.x <= 0) {
                    //when ball reaches left of canvas
                    this.xSpeed = -1 * this.xSpeed;
                }
            }
            resize(radian) {
                this.radian = radian;
            }
        }

        //paddle object
        class Paddle {
            constructor(x, y, radian) {
                this.x = x;
                this.y = y;
                this.radian = radian;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radian, 0, 2 * Math.PI);
                ctx.stroke();
            }
            move() { }
        }

        b1 = new Ball(50, 50, 5, 5, 20, "red");
        p1 = new Paddle(100, 20, 30);
        p2 = new Paddle(1300, 20, 30);

        // A function to repeat every time the animation loops.
        function repeatme() {
            ctx.clearRect(0, 0, 1400, 700);
            b1.draw();
            b1.move();
            //b1.resize();
            p1.draw();
            p1.move();
            p2.draw();
            p2.move();

            hitDetection();

            window.requestAnimationFrame(repeatme);
        }

        // Get the animation going.
        repeatme();

        //event code here
        canvas.addEventListener("mousemove", function (event) {
            p1.y = (event.clientY - canvas.offsetTop);
        });

        // Add a Javascript event listener to the keypress event.
        window.addEventListener("keypress", function (event) {
            // Just log the event to the console.
            console.log(event);
        });

        //keypresses with jQuery
        $(document.body).on('keydown', function (e) {
            //console.log(e.which);
            switch (e.which) {
                // key code for up arrow
                case 38:
                    //console.log('top arrow key pressed!');
                    p2.y = p2.y - 30;
                    break;

                // key code for down arrow
                case 40:
                    //console.log('bottom arrow key pressed!');
                    p2.y = p2.y + 30;
                    break;
            }
        });

        function hitDetection() {
            if (b1.x == p1.x || b1.y == p1.y) {
                console.log("CONTACT");
            }
        }

    </script>

</body>

</html>